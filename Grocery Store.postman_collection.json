{
  "info": {
    "_postman_id": "ced199b2-46e5-4c7e-9116-d1d12358cf67",
    "name": "Grocery Store",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "40840112"
  },
  "item": [
    {
      "name": "Happy Path",
      "item": [
        {
          "name": "API Status",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "console.log(\"Before\")"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "let res = pm.response.json();\r",
                  "\r",
                  "pm.test(\"Status is UP\", () => {\r",
                  "pm.expect(res.status).to.eql(\"UP\");\r",
                  "});\r",
                  "\r",
                  "console.log(res.status)\r",
                  "\r",
                  "pm.test(\"Status code is 200\", function () {\r",
                  "    pm.response.to.have.status(200);\r",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseURL}}/status",
              "host": [
                "{{baseURL}}"
              ],
              "path": [
                "status"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Register API client",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Capture Access Token\", () => {\r",
                  "    let responseJson = pm.response.json();\r",
                  "    pm.expect(responseJson).to.have.property(\"accessToken\");\r",
                  "    let accessToken = responseJson.accessToken; // Store the access token in a variable\r",
                  "    pm.collectionVariables.set(\"accessToken\", accessToken);\r",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"clientName\": \"{{$randomFullName}}\",\r\n    \"clientEmail\": \"{{$randomEmail}}\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseURL}}/api-clients",
              "host": [
                "{{baseURL}}"
              ],
              "path": [
                "api-clients"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get All Products",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseURL}}/products?results=2",
              "host": [
                "{{baseURL}}"
              ],
              "path": [
                "products"
              ],
              "query": [
                {
                  "key": "category",
                  "value": "fresh-produce",
                  "disabled": true
                },
                {
                  "key": "results",
                  "value": "2",
                  "type": "text"
                },
                {
                  "key": "available",
                  "value": "false",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Specific Products",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "let response = pm.response.json();\r",
                  "\r",
                  "pm.test(\"Product ID check\", () => {\r",
                  "    const productId = Number(pm.collectionVariables.get(\"productId\"));\r",
                  "    pm.expect(response.id).to.eql(productId);\r",
                  "});\r",
                  "\r",
                  "\r",
                  "pm.test(\"Status code is 200\", function () {\r",
                  "    pm.response.to.have.status(200);\r",
                  "});\r",
                  "\r",
                  "pm.test(\"Product Name\", () => {\r",
                  "    pm.expect(response.name).to.eql('Starbucks Coffee Variety Pack, 100% Arabica');\r",
                  "});\r",
                  "\r",
                  "pm.test(\"Check if its string\", () => {\r",
                  "    pm.expect(pm.response.status).to.be.a('string')\r",
                  "   })\r",
                  "\r",
                  "   pm.test(\"Check price\", () => {\r",
                  "    pm.expect(response.price).to.be.greaterThan(0)\r",
                  "   })\r",
                  "\r",
                  "pm.test(\"Check product is in stock\", () => {\r",
                  "    pm.expect(response.inStock).to.be.true\r",
                  "    pm.expect(response.inStock).to.eql(true)\r",
                  "})\r",
                  "\r",
                  "pm.test(\"Check category\", () => {\r",
                  "    pm.expect(response.category).to.eql(\"coffee\")\r",
                  "})"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseURL}}/products/:productId",
              "host": [
                "{{baseURL}}"
              ],
              "path": [
                "products",
                ":productId"
              ],
              "query": [
                {
                  "key": "product-label",
                  "value": "true",
                  "disabled": true
                }
              ],
              "variable": [
                {
                  "key": "productId",
                  "value": "{{productId}}"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Cart",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Capture CartId\", () => {\r",
                  "    let responseJson = pm.response.json();\r",
                  "    pm.expect(responseJson).to.have.property(\"cartId\");\r",
                  "    let cartId = responseJson.cartId; // Store the access token in a variable\r",
                  "    pm.collectionVariables.set(\"cartId\", cartId);\r",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseURL}}/carts",
              "host": [
                "{{baseURL}}"
              ],
              "path": [
                "carts"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Add item to cart",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Capture Items\", () => {\r",
                  "    let responseJson = pm.response.json();\r",
                  "    pm.expect(responseJson).to.have.property(\"itemId\");\r",
                  "    let itemId = responseJson.itemId; // Store the access token in a variable\r",
                  "    pm.collectionVariables.set(\"ItemId\", itemId);\r",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"productId\": 4643\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseURL}}/carts/:cartId/items",
              "host": [
                "{{baseURL}}"
              ],
              "path": [
                "carts",
                ":cartId",
                "items"
              ],
              "variable": [
                {
                  "key": "cartId",
                  "value": "{{cartId}}"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Cart",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseURL}}/carts/:cartId",
              "host": [
                "{{baseURL}}"
              ],
              "path": [
                "carts",
                ":cartId"
              ],
              "variable": [
                {
                  "key": "cartId",
                  "value": "{{cartId}}"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Cart - Qty",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "function getRandomNumber(maxValue){\r",
                  "    return Math.floor(Math.random() * maxValue) + 1; \r",
                  "}\r",
                  "pm.collectionVariables.set('randomQty', getRandomNumber(14));"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"quantity\": {{randomQty}}\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseURL}}/carts/:cartId/items/:itemId",
              "host": [
                "{{baseURL}}"
              ],
              "path": [
                "carts",
                ":cartId",
                "items",
                ":itemId"
              ],
              "variable": [
                {
                  "key": "cartId",
                  "value": "{{cartId}}"
                },
                {
                  "key": "itemId",
                  "value": "{{ItemId}}"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Cart - Replace item",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n \"productId\": 5499\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseURL}}/carts/:cartId/items/:itemId",
              "host": [
                "{{baseURL}}"
              ],
              "path": [
                "carts",
                ":cartId",
                "items",
                ":itemId"
              ],
              "variable": [
                {
                  "key": "cartId",
                  "value": "{{cartId}}"
                },
                {
                  "key": "itemId",
                  "value": "{{ItemId}}"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Cart Items",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseURL}}/carts/:cartId/items",
              "host": [
                "{{baseURL}}"
              ],
              "path": [
                "carts",
                ":cartId",
                "items"
              ],
              "variable": [
                {
                  "key": "cartId",
                  "value": "{{cartId}}"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Place Order",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Place Order\", () => {\r",
                  "    let responseJson = pm.response.json();\r",
                  "    pm.expect(responseJson).to.have.property(\"orderId\");\r",
                  "    let orderId = responseJson.orderId; // Store the access token in a variable\r",
                  "    pm.collectionVariables.set(\"orderId\", orderId);\r",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "",
                "value": "",
                "type": "text",
                "disabled": true
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"cartId\": \"{{cartId}}\",\r\n    \"customerName\": \"{{$randomFullName}}\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseURL}}/orders",
              "host": [
                "{{baseURL}}"
              ],
              "path": [
                "orders"
              ],
              "query": [
                {
                  "key": "cartId",
                  "value": "{{cartId}}",
                  "type": "text",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Specific Order",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseURL}}/orders/:orderId",
              "host": [
                "{{baseURL}}"
              ],
              "path": [
                "orders",
                ":orderId"
              ],
              "variable": [
                {
                  "key": "orderId",
                  "value": "{{orderId}}"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get All Orders",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// //Using Normal For loop\r",
                  "// pm.test(\"Created Order is in the list\", () => {\r",
                  "//     let isOrderInResponse = false\r",
                  "//     let response = pm.response.json()\r",
                  "//     for (i = 0; i < response.length; i++) {\r",
                  "//         if (response[i].id === pm.collectionVariables.get('orderId')) {\r",
                  "//             console.log(\"Found It\")\r",
                  "//             isOrderInResponse = true\r",
                  "//         }\r",
                  "//     }\r",
                  "//     pm.expect(isOrderInResponse).to.be.true\r",
                  "// })\r",
                  "\r",
                  "// //Using forEach\r",
                  "// pm.test(\"Created Order is in the list\", () => {\r",
                  "//     let isOrderInResponse = false\r",
                  "//     let response = pm.response.json()\r",
                  "//     response.forEach((order) => {\r",
                  "//     if (order.id === pm.collectionVariables.get('orderId')) {\r",
                  "//             console.log(\"Found It\")\r",
                  "//             isOrderInResponse = true\r",
                  "//         }\r",
                  "//     })\r",
                  "//     pm.expect(isOrderInResponse).to.be.true\r",
                  "// })\r",
                  "\r",
                  "//Using Find\r",
                  "pm.test(\"Check if the response contains an order\", () => {\r",
                  "let response = pm.response.json()\r",
                  "let res = response.find((order) => order.id === pm.collectionVariables.get('orderId'))\r",
                  "pm.expect(res).to.be.an('object')\r",
                  "})\r",
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseURL}}/orders",
              "host": [
                "{{baseURL}}"
              ],
              "path": [
                "orders"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Order - Name & Comments",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n \"customerName\": \"New-01_20-Jan\",\r\n \"comment\": \"Updated Comments\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseURL}}/orders/:orderId",
              "host": [
                "{{baseURL}}"
              ],
              "path": [
                "orders",
                ":orderId"
              ],
              "variable": [
                {
                  "key": "orderId",
                  "value": "{{orderId}}"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Order",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "let response = pm.response.json();\r",
                  "\r",
                  "pm.test(\"Order ID check post deletion\", () => {\r",
                  "    const orderId = Number(pm.collectionVariables.get('orderId'));\r",
                  "    pm.expect(response.error).to.contain(pm.collectionVariables.get('orderId'));\r",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{baseURL}}/orders/:orderId",
              "host": [
                "{{baseURL}}"
              ],
              "path": [
                "orders",
                ":orderId"
              ],
              "variable": [
                {
                  "key": "orderId",
                  "value": "{{orderId}}"
                }
              ]
            }
          },
          "response": []
        }
      ],
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "type": "text/javascript",
            "packages": {},
            "requests": {},
            "exec": [
              ""
            ]
          }
        },
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "packages": {},
            "requests": {},
            "exec": [
              "//This snippet checks the return codes for all the request of Happy Path scenarios\r",
              "const acceptableStatusCodes = [200, 201, 204];\r",
              "\r",
              "pm.test(\"Status code is acceptable (200, 201, or 204)\", () => {\r",
              "    pm.expect(acceptableStatusCodes).to.include(pm.response.code);\r",
              "});\r",
              "\r",
              "pm.test(\"Status name is correct (e.g., OK, Created, No Content)\", function () {\r",
              "    const acceptableStatusNames = [\"OK\", \"Created\", \"No Content\"];\r",
              "    pm.expect(acceptableStatusNames).to.include(pm.response.status);\r",
              "});"
            ]
          }
        }
      ]
    },
    {
      "name": "Negative Testing",
      "item": [
        {
          "name": "Missing Authorization",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Missing Authorization\", function () {\r",
                  "    //pm.expect(pm.response.text()).to.include('Missing Authorization header.');\r",
                  "     pm.expect(pm.response.text()).to.have.string(\"Missing\")\r",
                  "    \r",
                  "})\r",
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"cartId\": \"{{cartId}}\",\r\n    \"customerName\": \"01_20-Jan\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseURL}}/orders",
              "host": [
                "{{baseURL}}"
              ],
              "path": [
                "orders"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Invalid Authorization",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "let response = pm.response.json();\r",
                  "\r",
                  "pm.test(\"Invalid Authorization\", function () {\r",
                  "    //pm.expect(pm.response.text()).to.include('Invalid bearer token.');\r",
                  "    pm.expect(response.error).to.have.string('bearer')\r",
                  "})\r",
                  "\r",
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "897f10e5b1b2f2dcc3ef84fe67fffba5f9867cefc297dfd0b639dfa4a7094fb7",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"cartId\": \"{{cartId}}\",\r\n    \"customerName\": \"01_20-Jan\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseURL}}/orders",
              "host": [
                "{{baseURL}}"
              ],
              "path": [
                "orders"
              ]
            }
          },
          "response": []
        }
      ],
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "type": "text/javascript",
            "packages": {},
            "requests": {},
            "exec": [
              ""
            ]
          }
        },
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "packages": {},
            "requests": {},
            "exec": [
              "pm.test(\"Status code is 401\", function () {\r",
              "    pm.response.to.have.status(401);\r",
              "});"
            ]
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "packages": {},
        "requests": {},
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "packages": {},
        "requests": {},
        "exec": [
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "baseURL",
      "value": "https://simple-grocery-store-api.click"
    },
    {
      "key": "accessToken",
      "value": "1"
    },
    {
      "key": "cartId",
      "value": "1"
    },
    {
      "key": "ItemId",
      "value": ""
    },
    {
      "key": "orderId",
      "value": ""
    },
    {
      "key": "productId",
      "value": ""
    },
    {
      "key": "isOrderInResponse",
      "value": ""
    },
    {
      "key": "randomQty",
      "value": ""
    }
  ]
}